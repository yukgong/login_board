DROP TABLE CALENDAR
CASCADE CONSTRAINTS;

DROP SEQUENCE SEQ_CAL;

CREATE TABLE CALENDAR(
	SEQ NUMBER(8) PRIMARY KEY, -- 조인을 할 경우에는 기본키로 잡아주고, 아닌 경우에는 빼도됨
	EMAIL VARCHAR2(50) NOT NULL,
	TITLE VARCHAR2(200) NOT NULL,
	CONTENT VARCHAR2(4000) NOT NULL,
	RDATE VARCHAR2(12) NOT NULL,
	WDATE DATE NOT NULL
);

ALTER TABLE CALENDAR ALTER COLUMN CONTENT columnType NULL

CREATE SEQUENCE SEQ_CAL
START WITH 1
INCREMENT BY 1;

ALTER TABLE CALENDAR
ADD CONSTRAINT FK_CAL_EMAIL FOREIGN KEY(EMAIL)
REFERENCES MEMBER(EMAIL);

SELECT SEQ, EMAIL, TITLE, CONTENT, RDATE, WDATE 
FROM ( 	
		-- 아래는 추가된 일정을, 일정이 있는 날을 기준으로 번호를 매기는 쿼리문
		SELECT ROW_NUMBER()OVER(PARTITION BY SUBSTR(RDATE, 1, 8) -- 20200720 '일'을 포함하는 날짜
		ORDER BY RDATE ASC) AS RNUM,
		SEQ, EMAIL, TITLE, CONTENT, RDATE, WDATE
		FROM CALENDAR
		WHERE 	EMAIL = 'zjzj1362@naver.com' -- 누구의 일정이니?
				AND SUBSTR(RDATE, 1, 6) = '202007' -- 몇 월달의 일정이니?
		
		)
WHERE RNUM BETWEEN 1 AND 5 -- 특정 날짜의 일정 요소가 5개 이상이더라도, 5개만 가져와라